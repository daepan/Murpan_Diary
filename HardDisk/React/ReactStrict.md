# ReactStrictMode

>최근 리액트 StrickMode에 대한 질문을 보고 신기했었다. </br>
리액트18에서 StrickMode에 대해 useEffect가 2번 일어난다는 사실에 대해 알게 되었다. </br>
일단 기본적으로 개발단계에서 Strict 태그가 들어온 것을 알고 있었지만 실제로 useEffect로 확인한 예시들을 보니 신기했다.

그렇다면 어째서 저런 일이 발생하는지 알아보자

## ReactStrict의 역할
자바스크립트에서는 엄격모드가 있다. 코드 상단에 `use strict`를 써놓으면 자바스크립트를 실행할 때 더욱 엄격히 확인한다.

리액트 또한 이에 유사한 StrictMode라는 컴포넌트가 있다.

이러한 Strict모드를 사용하면 리액트가 자식 컴포넌트를 검사하고 잘못 사용된 부분을 
경고메세지를 통해 우리에게 알려준다. 이를 통해 리액트를 사용하면서 애플리케이션에 잠재도니 문제를 미리 해결할 수 있다.

## 검사항목
문서의 설명을 보면 5가지를 검사한다.
1. 잘못 사용한 생명주기 메서드 : componentWillMount같은 지원종료의 메서드 사용시 경고를 띄운다
2. 레거시 문자열 ref 사용여부 : 문자열 ref를 감시한다. 초기버전에 제공된 내용이며, 지금은 createRef()함수로 만든 객체 ref를 사용한다.
3. findDOMNode사용여부 : 컴포넌트 자식 중 특정 엘리먼트를 찾는 함수이다. 자식 엘리먼트는 구현방식에 따라 달라질 수 있기에 유지보수가 어려워
사용을 자제한다. 대신 직접ref를 지정해 사용하라고 권장한다.
4. sideEffect : 리액트는 컴포넌트를 랜더링 하기 위해 두단계를 거친다. 랜더링과 커밋, 랜더링 단계에서는 변화를 계산하는 단계이다.
예를 들어 render함수를 호출해서 이전 값과 비교하는 방식이다. 이렇게 계산한 변경을 반영하는 단계가 커밋이다.
랜더링 단계에서는 사용하는 메서드는 비교계산을 위해 여러번 호출 될 수 있는데 이 메서드 안에서 부작용을 포함하지 않는 것이 중요하다.
메모리 누수등 예측하지 못한 문제를 일으킬 가능성이 있기 때문이다.

>참고로 StrictMode에서 렌더링 단계의 메서드는 두번씩 호출하는 이유는 부작용 문제를 진단하는 이유에서이다.
