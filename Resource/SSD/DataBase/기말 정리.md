## 데이터 검색

- 데이터 검색은 쿼리문을 통해 탐색
	- SELECT *  FROM ~~ WHERE
	- DISTINCT
		- 중복 제외
	- AND, OR, NOT
		- 여러 조건 결합
	- BETWEEN A AND B
		- A와 B 사이
	- IN (A, B, C)
		- 속성값 중 하나라도 일치 시 참
	- IS NULL
		- NULL은 어떤 비교를 해도 거짓
		- IS NOT NULL 
	- LIKE
		- WHERE DNAME LINK H%n
	- UNION
		- 중복된 결과를 제거하고 하나의 결과 출력
	- UNION ALL
		- 중복된 결과까지 모두 출력
- 집합 연산자
	- 외부 합집합
		- 합병 호환성의 제약 조건
			- 차수가 같아야한다
			- 대응되는 속성의 쌍 별로 타입이 같아야한다.
			- 대응되는 속성의 쌍 별로 의미가 같아야한다.
		- 만약 두 질의 결과가 불일치 한 경우
			- 외부 합집합을 활용
			- 두 질의 결과의 속성수와 타입을 일치시키고, 모든 속성에서 사용할 수 있는 NULL을 통해 강제로 동일한 구조를 생성한다.
-  ORDER BY 절
	- 특정 속성 값을 기준으로 오름차순, 내림차순으로 정렬
	- ORDER BY {column_name} [ASC|DESC]
- 집단 함수
	- SUM 그룹의 합계
	- AVG 그룹의 평균
	- COUNT 그룹의 개수
	- MAX 그룹의 최대값
	- MIN 그룹의 최솟값
	- VAR 그룹의 분산
	- STDEV 그룹의 표준편차
- GROUP BY 절
	- SELECT 절에 집단 연산자는 GROUP BY에 사용한 속성명만 사용가능
	- 각 그룹에서 개별 튜플로 접근 불가
	- HAVING은 GROUP BY 절의 종속절
		- HAVING 각 그룹에 대한 제약 조건을 기술
>SELECT DNO, AVG(SALARY) AS DNOAVGSAL
>FROM EMPLOYEE
>GROUP BY DNO 
>HAVING MAX(SALARY) > 500 
- 부서의 최대 봉급이 500 초과인 부서에 대해서만부서별 사원들의 평균봉급과 부서번호를 출력하시오.
- TOP 함수
	- 기준 최고
SELECT top(5) *
FROM employee
order by salary desc

- SELECT 집단 함수() OVER (PARTITION BY 속성명)



## 조인과 중첩 질의문
- 조인 이란?
	- 여러개의 테이블에 하나의 SQL 질의문으로 한번에 조회할 수 있는 기능
	- 조인 표기법을 통해 SQL문 하나로 여러 테이블에서 검색 가능하다
	- 조인문 시 테이블에 각 접두사와 별명 기능을 통해 사용 가능
- 카티션 프로젝트
	- 두 테이블 모두 가능한 쌍을 생성하는 연산
- 조인의 종류
	- 이중 조인 (테이블이 2개)
		- 동등조인 =
		- 자연조인:  FROM 테이블명 NATURAL JOIN 테이블명
		- 세타조인 >
		- 셀프 조인 자기테이블 선언
	- 다중 조인 (여러 개)
		- 3중 조인
	- 안시 조인
		- 크로스조인
		- 내부조인
		- 외부조인
- 중첩 질의문이란?
	- 여러 SQL 간의 상호 전달 및 처리를 하는 질의문
	- 단일행 서브쿼리
		- 서브쿼리의 결과로 하나의 튜플만 반환
	- 다중행 서브쿼리
		- 서브 쿼리의 결과로 여러 개의 튜플 반환
	- 구분해야하는 이유는?
		- 일반적인 비교 연산자는 속성 값 간의 비교 연산에 의미하고, 집합에 대한 비교 연산은 불가하다
	- 다중행 서브쿼리의 경우 앞에 4개를 붙일 수 있음
		- IN 여러 값중 하나이기만 하면 참
		- ANY, SOME 하나라도 일치하면
		- ALL 모두 일치하면
		- EXIST 서브쿼리의 결과가 하나라도 존재하면
- 상호 연관 서브 쿼리
	- 메인, 서브 쿼리 간의 검색 결과를 교환하는 서브 쿼리
		- 어떤 튜플에 대한 조건을 비교하는가에 따라, 서브쿼리의 결과가 다르게 나온다.
		- 보통 이보다는 조인구문활용이 더 효과적인 경우도 있음

## 트랜잭션과 뷰
- 트랜잭션이란?
	- 논리적인 일의 단위로, 하나의 SQL은 하나의 트랜잭션이다.
	- 이 트랜잭션에 대해서는 동시성 제어가 필요하다
		- 동시에 수행되었을때 서로 간섭하지 못하도록 해야한다.
		- 고장나도 데이터베이스의 일관성을 유지해야한다.
		- 트랜잭션 단위의 회복을 이룸
	- 특성 (원일격영: ACID)
		- 원자성
			- 완전 수행, 완전 미수행
		- 일관성
			- 시간이 지나도 트랜잭션 없이 변하면 안됨
		- 격리성
			- 트랜잭션으로 갱신 중에는 다른 트랜잭션의 영향을 받으면 안됨
		- 지속성
			- 시스템이 고장나도 트랜잭션이 완료된 데이터는 그대로 유지되어야함
	- DB 기능
		- 회복 : 원, 지
		- 동시성제어 : 일, 고
		- 무결성제약 : 일
	![[Pasted image 20241209045038.png]]
	- COMMIT
		- 트랜잭션 수행됨
	- ROLLBACK
		- 트랜재션 취소하고 종료
	- SAVEPOINT
		- 현재 트랜잭션에서 ROLLBAKC 시킬 위치 지정
	- 이를 통해 
		- 데이터 무결성을 보장하고, 변경 전 상황을 확인하고
		- 논리적으로 연관된 작업의 그룹화를 할 수 있다.
	- 3 가지 트랜잭션 모드
		- 자동 커밋 트랜잭션
			- 하나의 명령문 = 하나의 트랜잭션을 기본
		- 명시적 트랜잭션
			- 명시적으로 사용자가 정의
		- 묵시적 트랜잭션
			- 복수개의 명령문을 하나의 트랜잭션으로 간주
	- 트랜잭션 주요 제어문
		- 트랜잭션 내에서 SAVEPOINT의 지정
			- SAVE TRAN 저장점명
		- 저장점 위치로 취소
			- ROLLBACK TRAN 저장점
- 뷰
	- 한마디로 가상 테이블
	- 뷰를 정의한 기본 테이블에 적용 가능하며, 무결성 제약 조건을 유지한다.
	- 왜 사용하는가
		- 사용자마다 특정 객체만 조회할 수 잇고, 복잡한 질의문을 단순화 가능하며, 데이터의 중복성을 최소화 할 수 있다.
	- 장점
		- 논리적 독립성, 보안, 단순화
		- 
## 질의 최적화
## 연산자의 구현
## 사용자의 관리
## 프로시저, 사용자 정의 함수와 트리거
## 장애와 회복
## 동시성 제어
## 교착상태