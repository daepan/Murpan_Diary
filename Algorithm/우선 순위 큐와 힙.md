## 우선 순위 큐

우선순위 속성을 갖는 데이터의 삽입과 제거 연산을 지원하는 ADT
보통 큐는 FIFO를 활용한다. 

하지만, 우선순위 큐에서는 새 요소에 우선순위를 부여해서 큐에 삽입하고 가장 높은 우선순위를 가진 요소부터 나온다.

### 노드의 삽입
큐에서 우선순위가 20인 큐를 넣는 경우
![[Pasted image 20240418004706.png]]

### 노드의 제거

전단만 제거해서 반환한다.
![[Pasted image 20240418004739.png]]

## 우선 순위 큐의 구현

힙을 구현해야한다.

### 힙이란?

힙 순서 속성을 만족하는 완전 이진 트리 // 자유저장소과 힙과는 다른 개념

#### 힙 순서 속성
* 트리 내의 모든 노드가 부모보다 커야한다.
* 뿌리 노드는 부모가 없으니 예외이다.
* 힙은 원하는 노드를 찾기 위해서는 모든 노드를 순회해야하기 때문에 이진 탐색이 불가능하다.

### 힙의 사용되는 연산
노드를 삽입하는 연산의 경우에는 뿌리 노드를 없애는 최솟값 삭제 연산을 진행
뿌리노드란? 힙에서 가장 작은 데이터를 갖는 노드

### 힙의 삽입 연산
❶ 힙의 최고 깊이 가장 우측에 새 노드를 추가 (이때 힙은 완전 이진 트리를 유지하도록)
❷ 삽입한 노드를 부모 노드와 비교
- 삽입한 노드가 부모 노드보다 크면 제 위치에 삽입된 것이므로 연산을 종료
- 반대로 부모 노드보다 작은 경우에는 다음 단계를 진행
❸ 삽입한 노드가 부모 노드보다 작으면 부모 노드와 삽입한 노드의 위치를 서로 바꿈
- 바꾼 후에는 단계 ❷를 다시 진행

![[Pasted image 20240418005350.png]]
![[Pasted image 20240418005411.png]]
### 힙의 삭제 연산
⁃ 힙의 최솟값 삭제 : 뿌리 노드를 삭제
⁃ 뿌리 노드를 삭제한 후 ‘힙 순서 속성’을 유지하기 위한 뒤처리 과정
❶ 힙의 최고 깊이 가장 우측에 있던 노드를 뿌리 노드로 옮김
- 이때 힙 순서 속성이 파괴됩니다. 이를 복원하기 위한 작업을 다음 단계부터 시작
❷ 옮겨온 노드의 양쪽 자식을 비교하여 작은 쪽 자식과 위치를 교환
- 힙 순서 속성을 지키려면 부모 노드는 양쪽 자식보다 작은 값을 가져야 하기 때문임
❸ 옮겨온 노드가 더 이상 자식이 없는 잎 노드로 되거나 양쪽 자식보다 작은 값을 갖는 경우 삭제 연산을 종료
- 그렇지 않으면 단계 ❷를 반복
![[Pasted image 20240418005518.png]]

![[Pasted image 20240418005608.png]]


### 힙의 구현

힙의 구현은 리스트 보다는 배열이 더 유리하다.
![[Pasted image 20240418005653.png]]

깊이 N의 노드는 (2N개) 배열의 2N - 1 ~ 2N + 1 -2 번 요소에 저장
배열의 장점은 인덱스 정보만 있으면, 힙의 각 노드의 위치나 부모와 자식 관계 확인이 용이하다.