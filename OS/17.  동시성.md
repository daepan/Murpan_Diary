## Race condition
막기 위해서는 동기화

## Critical Section

공유하고 있기 때문에 값이 동시에 바뀌면서 동시성 문제로 인해 문제가 발생할 수 있는 것

오직 하나의 프로세스만 접근해야함

누군가 접속하면 다른 사람은 접근하지 말아야한다. 방해받지 말고 일어나야함

이를 위해 Locking이 필요.

## Lock
위의 치명적 섹션에 접근할 때는 Lock을 통해 접근한다.

이를 보장하기위해
Mutual exclusion 하나의 프로세스만 접근
Fairness 어떤 프로세스도 접근할 수 있게
Performance 성능적으로

entry locking
exit unlocking
하면서 접근함

인터럽트를 가능하거나 불가능하게 하는 것
멀티 프로세서에서는 문제가 많으니 생각이 많이 필요하다

문제점
No mutual Exclusion 
Spin waiting

하드웨어 명령어를 통해 원자단위로

## 패터슨 솔루션

이걸 발전 시킨거

## 덱커 솔루션
(그렇게 안 중요함)

## 동기화 하드웨어

유니 프로세서에서 인터럽트자체를 방지
하지만 이는 프로세서가 많아지면 성능이 떨어짐
대부분 하드웨어적으로 RMW 자체를 한번에 처리하도록한다.

효과적인 락을 제공하면 낮은 비용으로 가능하다.

인터럽트 방지로 할 수도 있다.
=> 초기에는 유용하게 사용

뮤텍스 flag로 동기화 진행

mutual Exclusion 보장하지 못함

계속 Spin-Waiting

TestAndSet
Lock 값을 기다렸다가 ㅏㅁ끼도하고 이런식으로 한다.
Atomic Exchange


## Compare And Swap
기대값을 확인하고 이에 대한 값에 대한 작업


Lock의 요구사항: spin lock
이것은 공정한가?
일정한 시간을 기다렸다가 

## Queue Lock


### 동시성 자료구조
기본 컨셉은 바뀌지 않지만 구현하는 방식은 계속 바뀜

상태 변수

### Producer와 Consumer

## state variable과 mutex가 없는 경우에 대한 접속


	



