
## 입출력 장치

* 목적: 시스템과 상호작용하기 위해 원격 장치와의 통신
* 이슈
	* 입출력을 시스템에 어떻게 통합할 것인가
	* 일반적인 매커니즘은?
	* 효율적으로 구현할 수 있는 방법은?

## 입출력 장치의 유형

* 기계가 읽을 수 있는 장치
	* 전자 장비와 통신
	* 디스크 드라이브, 컨트롤러
* 사람이 읽을 수 장치
	* 비디오 디스플레이 터미널, 키보드, 마우스, 프린터


##  장치의 차이점

- **저장 장치**: 디스크, 테이프
- **전송 장치**: 네트워크 카드, 모뎀
- **인간 인터페이스 장치**: 화면, 키보드, 마우스
- **I/O 이슈**:
    - 데이터 전송 속도
    - 제어의 복잡성
    - 전송 단위: 스트림 또는 블록
    - 데이터 표현: 인코딩 방식
    - 오류 조건: 장치별 응답 차이

### I/O 장치 구조

- CPU는 메인 메모리에 메모리 버스를 통해 연결
- 일부 장치는 일반 I/O 버스를 통해 시스템에 연결

### I/O 아키텍처

- **I/O 버스**: CPU와 I/O 장치를 연결하는 데이터 경로
- **I/O 포트**: 호스트와 장치 간의 연결 지점
- **컨트롤러**: 포트, 버스 또는 장치를 작동할 수 있는 전자 장치 모음
- **주소**: 직접 I/O 명령 또는 메모리 매핑 I/O 사용

### Canonical 장치

- **하드웨어 인터페이스**: 상태 레지스터, 명령 레지스터, 데이터 레지스터
- **내부 구조**: 마이크로 컨트롤러, 메모리(DRAM 또는 SRAM), 기타 하드웨어 특정 칩

### I/O 기능의 발전

- **프로세서가 직접 장치를 제어**
- **컨트롤러 또는 I/O 모듈 추가**
    - 프로그래밍된 I/O를 사용, 인터럽트 없이
- **인터럽트 사용**
    - I/O 작업이 완료될 때 인터럽트 발생
- **직접 메모리 액세스(DMA)**
    - 데이터 블록을 메모리에 전송, 프로세서는 시작과 끝만 관여

### I/O 수행 기술

- **프로그래밍된 I/O (폴링)**
    - 단점: CPU 시간을 낭비
- **인터럽트 기반 I/O**
    - I/O 명령 발행 후 프로세서가 다른 작업 수행
    - I/O 모듈이 완료되면 인터럽트 발생
- **직접 메모리 액세스 (DMA)**
    - 전체 블록이 전송된 후에만 프로세서가 인터럽트됨

### 폴링 vs 인터럽트

- **폴링**: 간단하지만 CPU 시간을 낭비
- **인터럽트**: CPU와 디스크가 적절히 활용됨, 그러나 전환 비용이 큼
- **디바이스 속도에 따라 선택**

### DMA(중요)
- CPU가 큰 데이터를 메모리에서 장치로 복사하는데 많은 시간 소모
- 완료되면 DMA가 인터럽트를 발생시킴

### I/O 인터페이스

- **I/O 명령어**: 특정 장치 레지스터에 데이터를 보내는 방법
- **메모리 매핑 I/O**: 장치 레지스터가 메모리 위치처럼 사용됨

## 스트림의 개념
* 디바이스부터 프로세스까지는 다 이런식으로 파이프 처럼 연결해서 데이터가 연결해서 데이터가 흘러가듯이 연결하는 과정을 스트림이라고 한다
* 사용자 프로세스와 장치 간의 전이중 통신 채널
- **구성 요소**: STREAM 헤드, 드라이버 끝, 읽기/쓰기 큐

## 버퍼를 줄이는 방법
* 버퍼를 효과적으로 하는 방법은 옵티마이즈 최적화 하는 방법 중에 하나이다.